# Learn more about services, parameters and containers at
# http://symfony.com/doc/current/book/service_container.html
parameters:
#    parameter_name: value

services:
    app.security.jwt_authenticator:
        class: AppBundle\Security\JwtAuthenticator
        autowire: true

    app.doctrine.hash_password_listener:
        class: AppBundle\Doctrine\HashPasswordListener
        autowire: true
        tags:
            - { name: doctrine.event_subscriber }

    app.api_doc.fos_rest_form_errors_parser:
        class: AppBundle\Parser\FOSRestFormErrorsParser
        tags:
            - { name: nelmio_api_doc.extractor.parser, priority: 1 }

    app.flysystem_adapters:
        class: AppBundle\FlysystemAdapter\FlysystemAdapters
        arguments: ["%default_adapter%"]

    app.flysystem.local:
        class: AppBundle\FlysystemAdapter\Local
        public: false
        arguments: ["%local_root_path%"]
        tags:
            - { name: app.flysystem_adapter, alias: local }

    app.flysystem.aws_s3:
        class: AppBundle\FlysystemAdapter\AwsS3
        public: false
        arguments: ["%aws_s3_key%", "%aws_s3_secret%", "%aws_s3_region%", "%aws_s3_bucket%"]
        tags:
            - { name: app.flysystem_adapter, alias: aws_s3 }

    app.flysystem.dropbox:
        class: AppBundle\FlysystemAdapter\Dropbox
        public: false
        arguments: ["%dropbox_secret%"]
        tags:
            - { name: app.flysystem_adapter, alias: dropbox }

    app.flysystem.sftp:
        class: AppBundle\FlysystemAdapter\Sftp
        public: false
        arguments: ["%sftp_host%", "%sftp_port%", "%sftp_username%", "%sftp_password%", "%sftp_root%"]
        tags:
            - { name: app.flysystem_adapter, alias: sftp }

    app.service.collection:
        class: AppBundle\Service\CollectionService
        autowire: true

    app.service.element_file_handler:
        class: AppBundle\Service\ElementFileHandler
